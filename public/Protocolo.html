<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/LogoImg.png">
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/protocolo.css">
    <title>ProSys - Protocolo</title>
</head>

<body>

    <!--  BARRA DE NAVEGACIÓN  -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">
                <img class="navbar-image" src="assets/LogoHorizontal.png" alt="">
            </a>
            <ul class="navbar-menu">
                <li class="navbar-item">
                    <a href="index.html" class="navbar-link">Inicio</a>
                </li>
                <li class="navbar-item">
                    <a href="Documentos.html" class="navbar-link">Documentos</a>
                </li>
                <li class="navbar-item">
                    <a href="Perfil.html" class="navbar-link">Perfil</a>
                </li>
                <li class="navbar-item">
                    <a href="Login.html" class="navbar-link">Inicio de sesión</a>
                </li>
                <li class="navbar-item">
                    <a href="RegistroProtocolo.html" class="navbar-link">Registro Protocolo</a>
                </li>
            </ul>
        </div>
    </nav>
    <!--    -->

    <!--  PÁGINA   -->

    <div class="contenedor-principal">
        <div class="protocolo-contenedor">
            <div class="ver-protocolo-info">
                <div class="protocolos-ver-1">
                    <div class="protocolo-info">
                        <div class="protocolo-info-nombre">
                            <h2 id="protocolo-nombre">Nombre de Protocolo</h2>
                        </div>
                        <div class="protocolo-datos">
                            <div class="protocolo-info-texto">
                                <h4>Integrantes de Equipo:</h4>
                            </div>
                            <div class="protocolo-info-integrantes">
                                <li id="protocolo-lider">Integrante 1</li>
                                <li id="protocolo-integrante1">Integrante 2</li>
                                <li id="protocolo-integrante2">Integrante 3</li>
                            </div>
                            <div class="protocolo-info-texto">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae quaerat, debitis
                                temporibus
                                optio accusantium rerum amet laborum, suscipit ex iste deserunt aliquam nobis alias
                                magni
                                doloribus harum corporis dolorum provident Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit. Hic doloribus deleniti natus accusamus molestias blanditiis, culpa
                                optio,
                                minima exercitationem doloremque iure nam amet. Dolore voluptas consequuntur cumque
                                velit
                                dolorum eum? lor
                            </div>
                            <div class="protocolo-info-estado">
                                <div class="protocolo-aprobado">Aprobado</div>
                                <div class="protocolo-enproceso">En Evaluación</div>
                                <div class="protocolo-noaprobado">No Aprobado</div>
                            </div>
                        </div>
                    </div>
                    <div class="protocolo-documento">
                        <div class="documento">
                            <img src="assets/DocRector.jpg" alt="Documento Rector" class="documentoImg" />
                            <br /><br />
                            <a href="Documentos/DocRector.pdf" download="Documento-Rector" class="btn-descargar">
                                Descargar
                            </a>
                        </div>
                    </div>
                </div>
                <div class="protocolo-ver-2">
                    <a href="EvaluarProtocolo.html" class="btn-descargar">
                        Evaluar Protocolo
                    </a>
                    <a href="EvaluarProtocolo.html" class="btn-descargar">
                        Editar Protocolo
                    </a>
                </div>
            </div>
            <div class="ver-protocolo-seguimiento">
                <h2>Seguimiento</h2>
                <div class="seguimiento-elemento">
                    <div class="seguimiento-elemento-calificacion">
                        <h4>Evaluación de SINODAL 1: 3</h4>
                    </div>
                    <div class="seguimiento-elemento-comentarios">
                        <div class="seguimiento-elemento-comentarios-texto">
                            Comentarios
                        </div>
                        <div class="seguimiento-elemento-comentarios-input">
                            <textarea class="ver-comentario" name="comentario" id="comentario" rows="5"
                                readonly></textarea>
                        </div>
                    </div>
                </div>
                <div class="seguimiento-elemento">
                    <div class="seguimiento-elemento-calificacion">
                        <h4>Evaluación de SINODAL 2: 1</h4>
                    </div>
                    <div class="seguimiento-elemento-comentarios">
                        <div class="seguimiento-elemento-comentarios-texto">
                            Comentarios
                        </div>
                        <div class="seguimiento-elemento-comentarios-input">
                            <textarea class="ver-comentario" name="comentario" id="comentario" rows="5"
                                readonly></textarea>
                        </div>
                    </div>
                </div>
                <div class="seguimiento-elemento">
                    <div class="seguimiento-elemento-calificacion">
                        <h4>Evaluación de SINODAL 3 : 2</h4>
                    </div>
                    <div class="seguimiento-elemento-comentarios">
                        <div class="seguimiento-elemento-comentarios-texto">
                            Comentarios
                        </div>
                        <div class="seguimiento-elemento-comentarios-input">
                            <textarea class="ver-comentario" name="comentario" id="comentario" rows="5"
                                readonly></textarea>
                        </div>
                    </div>
                </div>
                <div class="seguimiento-elemento">
                    <div class="seguimiento-elemento-noencontrado">
                        <h4>Aún no se han encontrado evaluaciones. Vuelve más tarde</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--    -->

    <!--  SCRIPT DE CONSULTA  -->
    <script>
        // Obtener Protocolo
        document.addEventListener('DOMContentLoaded', async function () {
            try {
                const response = await fetch('/api/protocolos/me', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: "include"
                });
                const data = await response.json();
                if (response.ok) {
                    console.log('Protocolo:', data);
                    // // Actualizar datos de usuario en la interfaz de usuario
                    document.getElementById('protocolo-nombre').innerText = data.nombre;
                    document.getElementById('protocolo-lider').innerText = data.lider;
                    document.getElementById('protocolo-integrante1').innerText = data.lider;
                    document.getElementById('protocolo-integrante1').innerText = data.biografia;
                    document.getElementById('protocolo-info-texto').innerText = data.descripcion;
                    switch (data.estado) {
                        case "Pendiente":
                            document.getElementById("protocolo-enproceso").style.display = "visible";
                            break;
                        case "Rechazado":
                            document.getElementById("protocolo-noaprobado").style.display = "visible";
                            break;
                        case "Aceptado":
                            document.getElementById("protocolo-aprobado").style.display = "visible";
                            break;
                        default:
                            break;
                    }

                }
                if (response.ok === false) {
                    console.log('Respuesta del servidor:', data.msg);
                }
            } catch (error) {
                console.error('Error en la petición:', error);
                alert('Hubo un error al intentar obtener el usuario.');
            }
        });
    </script>

    <!--  FOOTER  -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="assets/LogoPrincipal.png" alt="Logo" class="footer-logo-img">
            </div>
            <div class="footer-aside">
                <p class="footer-text">
                    Todos los derechos reservados.
                </p>
                <ul class="footer-menu">
                    <li class="footer-item">
                        <a href="/politica" class="footer-link">Política de Privacidad</a>
                    </li>
                    <li class="footer-item">
                        <a href="/terminos" class="footer-link">Términos y Condiciones</a>
                    </li>
                    <li class="footer-item">
                        <a href="/contacto" class="footer-link">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </footer>
    <!--    -->

</body>

</html>